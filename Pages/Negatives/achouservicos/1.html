<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <link href="/assets/img/favico.png" rel="shortcut icon" />

    <title>AchouServiços! | Contato </title>

    <link rel="stylesheet" href="assets/css/bootstrap.min.css">
    <link rel="stylesheet" href="assets/css/font-awesome/css/font-awesome.min.css">
    <link rel="stylesheet" href="assets/css/contact.css">

    <!--Start of Zopim Live Chat Script-->
    <script type="text/javascript">
    window.$zopim||(function(d,s){var z=$zopim=function(c){z._.push(c)},$=z.s=
    d.createElement(s),e=d.getElementsByTagName(s)[0];z.set=function(o){z.set.
    _.push(o)};z._=[];z.set._=[];$.async=!0;$.setAttribute('charset','utf-8');
    $.src='//v2.zopim.com/?2eqMpw6c5rQW4xwbVClmu148Vw2XSrYS';z.t=+new Date;$.
    type='text/javascript';e.parentNode.insertBefore($,e)})(document,'script');
    </script>
    <!--End of Zopim Live Chat Script-->
</head>

<body>

<nav class="navbar-custom">
    <div class="container">
        <a class="navbar-brand" href="/"><span class="logo-a">Achou</span><span class="logo-s">Serviços</span><span class="logo-e">!</span></a>

        <li class="link-login-logout"><a href="/login">Entrar</a></li>
    </div>
</nav>

<div class="container">
    <div class="row clearfix">
        <div class="col-md-6  col-md-offset-3 col-xs-12 column">
            <div class="search-main-box">
                <div class="login-message">
                    <p> Mande-nos seu recado! </p>
                </div>
                <form class="form-inline" role="form" id="contact">
                    <div class="form-group">
                        <input type="text" class="form-control" name="name" id="name" placeholder="Nome">
                    </div>
                    <div class="form-group">
                        <input type="text" maxlength="50" class="form-control" name="email" id="email" placeholder="E-mail">
                    </div>
                    <div class="form-group">
                        <input type="text" maxlength="15" class="form-control" name="phone" id="phone" placeholder="Telefone">
                    </div>
                    <div class="form-group">
                        <textarea maxlength="1000" class="form-control" name="message" id="message" placeholder="Digite aqui sua mensagem"></textarea>
                    </div>
                    <button type="submit" id="submit" class="btn btn-info">
                        <i id="icon-load" class="hide fa fa-spinner fa-spin"></i>Enviar
                    </button>
                </form>
            </div>

        </div>
    </div>
</div>
</body>
<script type="text/javascript" src="assets/js/jquery-1.11.1.min.js"></script>
<script type="text/javascript" src="/assets/js/bootstrap.min.js"></script>
<script type="text/javascript" src="/assets/js/noty/themes/relax.js"></script>
<script type="text/javascript" src="/assets/js/noty/packaged/jquery.noty.packaged.min.js"></script>
<script type="text/javascript" src="/assets/js/jquery.validate.js"></script>

<script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-57557554-1', 'auto');
    ga('send', 'pageview');

    $(function() {
        $("body").css({ "height" : $( window ).height()});

        $("#contact").validate({
            rules: {
                name: {
                    required: true,
                    minlength: 3
                },
                email: {
                    email: true,
                    required: function(element) {
                        return !$("#phone").val().length;
                    }
                },
                phone: {
                    minlength: 8,
                    required: function(element) {
                        return !$("#email").val().length;
                    }
                },
                message: {
                    minlength: 10,
                    required: true
                }
            },

            messages: {
                name: {
                    required: "Campo Obrigatório",
                    minlength: "Favor inserir pelo menos 3 caracteres"
                },
                email: "Favor entrar com um e-mail válido ou um telefone",
                phone : {
                    required: "Favor entrar com um telefone ou e-mail",
                    minlength: "Favor inserir pelo menos 3 caracteres"
                },
                message: {
                    required: "Campo Obrigatório",
                    minlength: "Favor inserir pelo menos 10 caracteres"
                }
            },

            submitHandler: function(form) {
                $("#icon-load").removeClass("hide");
                $.post( "/ajax/contact.php", $( "#contact" ).serialize(), function(data, status) {
                    var obj = JSON.parse(data);
                    $("#icon-load").addClass("hide");

                    if(obj.status === "success") {
                        noty({
                            text: obj.message,
                            template: '<div class="noty-message-success"><span class="noty_text"></span><div class="noty_close"></div></div>',
                            layout: 'bottomLeft',
                            theme: 'relax',
                            timeout: 3000
                        });
                        setTimeout(function() {
                            window.location = '/';
                        }, 2000);
                    } else {
                        noty({
                            text: obj.message,
                            template: '<div class="noty-message-error"><span class="noty_text"></span><div class="noty_close"></div></div>',
                            layout: 'bottomLeft',
                            theme: 'relax',
                            timeout: 3000
                        });
                    }

                });
            }
        });
    });
</script>
</html>
